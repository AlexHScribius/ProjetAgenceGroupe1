<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Menu Agent</title>
</h:head>

<h:body bgcolor="white">
	<div align="center">
		<h1 class="title">Menu Principal</h1>
		<br />
			<fieldset>
			<legend>Liste des voitures</legend>
				<h:form>
					<p:dataTable value="#{GestionVoituresBean.listeVoitures}" var="voiture" editable="true" id="mydata" rowKey="#{voiture.id_voiture}">
						<p:ajax event="rowEdit" listener="#{GestionVoituresBean.onRowEditVoiture}"/>
						<p:ajax event="rowEditCancel" listener="#{GestionVoituresBean.onRowCancelVoiture}"/>
						<p:column>
							<f:facet name="header">#</f:facet>
							<h:outputText value="#{voiture.id_voiture}"/>
						</p:column>
						<p:column>
							<f:facet name="header">marque</f:facet>
							<p:cellEditor>
								<f:facet name="output"><h:outputText value="#{voiture.marque}"/></f:facet>
								<f:facet name="input"><h:inputText value="#{voiture.marque}" style="width:100%"/></f:facet>
							</p:cellEditor> 
 						</p:column>
						<p:column>
							<f:facet name="header">immatriculation</f:facet>
							<p:cellEditor>
								<f:facet name="output"><h:outputText value="#{voiture.immatriculation}"/></f:facet>
								<f:facet name="input"><h:inputText value="#{voiture.immatriculation}" style="width:100%"/></f:facet>
							</p:cellEditor>
						</p:column>
						<p:column>
							<f:facet name="header">prix</f:facet>
							<p:cellEditor>
								<f:facet name="output"><h:outputText value="#{voiture.prix}"/></f:facet>
								<f:facet name="input"><h:inputText value="#{voiture.prix}" style="width:100%"/></f:facet>
							</p:cellEditor>
						</p:column>
						<p:column>
							<f:facet name="header">disponibilité</f:facet>
							<p:cellEditor>
								<f:facet name="output"><h:outputText value="#{voiture.dispo}"/></f:facet>
								<f:facet name="input"><h:inputText value="#{voiture.dispo}" style="width:100%"/></f:facet>
							</p:cellEditor>
						</p:column>
						<p:column  style="width:35px">
							<f:facet name="header">Édition</f:facet>
							<p:rowEditor />
						</p:column>
					</p:dataTable>
					
					<br/><br/>
					
					<p:panelGrid columns="7">
						<f:facet name="header">Ajouter une voiture</f:facet>
						<h:outputLabel for="marque" value="Marque : "/>
						<h:inputText id="marque" value="#{GestionVoituresBean.marque}"/>
						<h:outputLabel for="immatriculation" value="Immatriculation : "/>
						<h:inputText id="immatriculation" value="#{GestionVoituresBean.immatriculation}"/>
						<h:outputLabel for="prix" value="Prix : "/>
						<h:inputText id="prix" value="#{GestionVoituresBean.prix}"/>
						
						<p:commandButton value="Save" action="#{GestionVoituresBean.saveAjout}" update="mydata"/>
					</p:panelGrid>
					
				</h:form>
			</fieldset>
			
			<br/><br/>
			
			<fieldset>
			<legend>Liste des locations</legend>
				<h:form>
					<p:dataTable value="#{GestionVoituresBean.locationListAll}" var="location" id="mydata2" rowKey="#{location.id_location}">
						<p:ajax event="rowEdit" listener="#{GestionVoituresBean.onRowEditLocation}"/>
						<p:ajax event="rowEditCancel" listener="#{GestionVoituresBean.onRowCancelLocation}"/>
						<p:column>
							<f:facet name="header">#</f:facet>
							<h:outputText value="#{location.id_location}" rendered="#{not location.editable}"/>
						</p:column>
						<p:column>
							<f:facet name="header">identifiant voiture</f:facet>
							<p:cellEditor>
								<f:facet name="output"><h:outputText value="#{location.voiture.id_voiture}"/></f:facet>
								<f:facet name="input"><h:inputText value="#{location.voiture.id_voiture}" style="width:100%"/></f:facet>
							</p:cellEditor>
						</p:column>
						<p:column>
							<f:facet name="header">identifiant client</f:facet>
							<p:cellEditor>
								<f:facet name="output"><h:outputText value="#{location.voiture.id_personne}"/></f:facet>
								<f:facet name="input"><h:inputText value="#{location.voiture.id_personne}" style="width:100%"/></f:facet>
							</p:cellEditor>
						</p:column>
						<p:column>
							<f:facet name="header">Édition</f:facet>
							<p:commandButton value="Supprimer" action="#{GestionVoituresBean.supprimerLocation(location)}" rendered="#{not location.editable}"/>
						</p:column>
					</p:dataTable>
					<p:commandButton value="Save" action="#{GestionVoituresBean.saveEditionLocation}" update="mydata2"/>
					
					<p:panelGrid columns="5">
						<f:facet name="header">Ajouter une location</f:facet>
						<h:outputLabel for="id_voiture" value="Identifiant voiture : "/>
						<h:inputText id="id_voiture" value="#{GestionVoituresBean.id_voiture}"/>
						<h:outputLabel for="id_client" value="Identifiant client : "/>
						<h:inputText id="id_client" value="#{GestionVoituresBean.id_client}"/>
						
						<p:commandButton value="Save" action="#{GestionVoituresBean.saveAjoutLocation}" update="mydata2"/>
					</p:panelGrid>
					
				</h:form>
			</fieldset>
	</div>
</h:body>
</html>









